<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUXURY BOUTIQUE</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: white;
            color: #333;
        }
        
        .container {
            max-width: 100%;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        
        .nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 10px 15px;
            border: 1px solid #333;
            background: white;
            border-radius: 20px;
            cursor: pointer;
        }
        
        .nav-btn.active {
            background: #333;
            color: white;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 80px;
        }
        
        .product-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
        }
        
        .product-image {
            width: 100%;
            height: 120px;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            margin-bottom: 10px;
            border-radius: 8px;
        }
        
        .product-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .product-price {
            color: #333;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .size-selector {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .size-btn {
            padding: 5px 8px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .size-btn.selected {
            background: #333;
            color: white;
        }
        
        .add-to-cart {
            width: 100%;
            padding: 10px;
            background: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .add-to-cart:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #333;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .admin-fab {
            bottom: 90px;
        }
        
        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: red;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            margin: 10% auto;
            width: 90%;
            max-width: 400px;
            border-radius: 10px;
            padding: 20px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .admin-btn {
            width: 100%;
            padding: 12px;
            background: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        
        .product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .delete-btn {
            background: red;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>LUXURY BOUTIQUE</h1>
            <p>–ü—Ä–µ–º–∏—É–º —Ä–µ–ø–ª–∏–∫–∏ 1:1</p>
        </div>

        <div class="nav">
            <button class="nav-btn active" onclick="filterProducts('all')">–í—Å–µ</button>
            <button class="nav-btn" onclick="filterProducts('bags')">–°—É–º–∫–∏</button>
            <button class="nav-btn" onclick="filterProducts('clothing')">–û–¥–µ–∂–¥–∞</button>
            <button class="nav-btn" onclick="filterProducts('shoes')">–û–±—É–≤—å</button>
        </div>

        <div class="products-grid" id="productsGrid">
            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>

        <!-- –ö–æ—Ä–∑–∏–Ω–∞ FAB -->
        <div class="fab" onclick="toggleCart()">
            üõçÔ∏è
            <div class="cart-badge" id="cartCount">0</div>
        </div>

        <!-- –ê–¥–º–∏–Ω FAB -->
        <div class="fab admin-fab" onclick="toggleAdmin()" id="adminFab">
            ‚öôÔ∏è
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
        <div class="modal" id="cartModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
                    <button class="close-btn" onclick="toggleCart()">&times;</button>
                </div>
                <div id="cartItems">
                    <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
                </div>
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd;">
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 15px;">
                        –ò—Ç–æ–≥–æ: <span id="cartTotal">0</span> —Ä—É–±.
                    </div>
                    <button class="admin-btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
        <div class="modal" id="phoneModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω</h3>
                    <button class="close-btn" onclick="closePhoneModal()">&times;</button>
                </div>
                <div class="form-group">
                    <input type="tel" class="form-input" id="phoneInput" placeholder="+7 999 123-45-67">
                </div>
                <button class="admin-btn" onclick="completeOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
        <div class="modal" id="adminModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
                    <button class="close-btn" onclick="toggleAdmin()">&times;</button>
                </div>
                
                <div class="form-group">
                    <input type="text" class="form-input" id="productName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
                </div>
                
                <div class="form-group">
                    <input type="number" class="form-input" id="productPrice" placeholder="–¶–µ–Ω–∞" value="8900">
                </div>
                
                <div class="form-group">
                    <select class="form-input" id="productCategory">
                        <option value="bags">–°—É–º–∫–∏</option>
                        <option value="clothing">–û–¥–µ–∂–¥–∞</option>
                        <option value="shoes">–û–±—É–≤—å</option>
                        <option value="accessories">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <input type="text" class="form-input" id="productSizes" placeholder="–†–∞–∑–º–µ—Ä—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)" value="S,M,L">
                </div>
                
                <div class="form-group">
                    <input type="text" class="form-input" id="productEmoji" placeholder="Emoji" value="üëú">
                </div>
                
                <button class="admin-btn" onclick="addProduct()">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                
                <div style="margin-top: 20px;">
                    <h4>–í—Å–µ —Ç–æ–≤–∞—Ä—ã:</h4>
                    <div id="productsList">
                        <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let products = JSON.parse(localStorage.getItem('products')) || [
            {
                id: '1',
                name: 'Louis Vuitton Keepall',
                price: 18900,
                category: 'bags',
                emoji: 'üéí',
                sizes: ['45', '50', '55'],
                description: '–î–æ—Ä–æ–∂–Ω–∞—è —Å—É–º–∫–∞'
            },
            {
                id: '2',
                name: 'Gucci –ë–ª–µ–π–∑–µ—Ä',
                price: 14900,
                category: 'clothing',
                emoji: 'üëî',
                sizes: ['48', '50', '52'],
                description: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±–ª–µ–π–∑–µ—Ä'
            }
        ];
        
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentFilter = 'all';

        // ========== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
        function init() {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è');
            displayProducts();
            updateCart();
            showAdminButton();
        }

        function showAdminButton() {
            // –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–¥–º–∏–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            document.getElementById('adminFab').style.display = 'flex';
        }

        function filterProducts(category) {
            console.log('–§–∏–ª—å—Ç—Ä:', category);
            currentFilter = category;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayProducts();
        }

        function displayProducts() {
            console.log('–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä—ã');
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            let filteredProducts = products;
            if (currentFilter !== 'all') {
                filteredProducts = products.filter(p => p.category === currentFilter);
            }
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #999;">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }
            
            filteredProducts.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <div class="product-image">${product.emoji}</div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">${product.price} —Ä—É–±.</div>
                    <div class="size-selector">
                        ${product.sizes.map(size => `
                            <button class="size-btn" onclick="selectSize(this, '${product.id}', '${size}')">${size}</button>
                        `).join('')}
                    </div>
                    <button class="add-to-cart" onclick="addToCart('${product.id}')" disabled>–í –∫–æ—Ä–∑–∏–Ω—É</button>
                `;
                grid.appendChild(card);
            });
        }

        function selectSize(btn, productId, size) {
            console.log('–í—ã–±—Ä–∞–Ω —Ä–∞–∑–º–µ—Ä:', size, '–¥–ª—è —Ç–æ–≤–∞—Ä–∞:', productId);
            
            // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ —Ä–∞–∑–º–µ—Ä–∞ –≤ —ç—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
            const card = btn.closest('.product-card');
            card.querySelectorAll('.size-btn').forEach(b => {
                b.classList.remove('selected');
            });
            
            // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä
            btn.classList.add('selected');
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
            const addBtn = card.querySelector('.add-to-cart');
            addBtn.disabled = false;
            addBtn.setAttribute('data-product-id', productId);
            addBtn.setAttribute('data-size', size);
        }

        function addToCart(productId) {
            console.log('–î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ—Ä–∑–∏–Ω—É:', productId);
            const product = products.find(p => p.id === productId);
            const size = event.target.getAttribute('data-size');
            
            if (product && size) {
                cart.push({
                    id: productId + '-' + size + '-' + Date.now(),
                    productId: productId,
                    name: product.name,
                    size: size,
                    price: product.price,
                    emoji: product.emoji
                });
                
                updateCart();
                alert('‚úÖ ' + product.name + ' –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É');
            }
        }

        function updateCart() {
            console.log('–û–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ä–∑–∏–Ω—É');
            const count = document.getElementById('cartCount');
            const items = document.getElementById('cartItems');
            const total = document.getElementById('cartTotal');
            
            count.textContent = cart.length;
            
            items.innerHTML = '';
            let totalPrice = 0;
            
            if (cart.length === 0) {
                items.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>';
            } else {
                cart.forEach(item => {
                    totalPrice += item.price;
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'product-item';
                    itemDiv.innerHTML = `
                        <div>
                            <strong>${item.emoji} ${item.name}</strong>
                            <div style="font-size: 12px; color: #666;">–†–∞–∑–º–µ—Ä: ${item.size}</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: bold;">${item.price} —Ä—É–±.</div>
                            <button class="delete-btn" onclick="removeFromCart('${item.id}')">‚úï</button>
                        </div>
                    `;
                    items.appendChild(itemDiv);
                });
            }
            
            total.textContent = totalPrice;
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function removeFromCart(itemId) {
            console.log('–£–¥–∞–ª—è–µ–º –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã:', itemId);
            cart = cart.filter(item => item.id !== itemId);
            updateCart();
        }

        function toggleCart() {
            const modal = document.getElementById('cartModal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
        }

        function checkout() {
            if (cart.length === 0) {
                alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
                return;
            }
            
            toggleCart();
            document.getElementById('phoneModal').style.display = 'block';
        }

        function completeOrder() {
            const phone = document.getElementById('phoneInput').value.trim();
            
            if (!phone) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                return;
            }
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram –±–æ—Ç–∞
            if (window.Telegram && window.Telegram.WebApp) {
                const orderData = {
                    action: 'create_order',
                    order: {
                        items: cart,
                        total: cart.reduce((sum, item) => sum + item.price, 0)
                    },
                    phone: phone
                };
                window.Telegram.WebApp.sendData(JSON.stringify(orderData));
            }
            
            alert('‚úÖ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω! –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.');
            cart = [];
            updateCart();
            closePhoneModal();
        }

        function closePhoneModal() {
            document.getElementById('phoneModal').style.display = 'none';
            document.getElementById('phoneInput').value = '';
        }

        // ========== –ê–î–ú–ò–ù –§–£–ù–ö–¶–ò–ò ==========
        function toggleAdmin() {
            const modal = document.getElementById('adminModal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
            
            if (modal.style.display === 'block') {
                loadProductsList();
            }
        }

        function addProduct() {
            console.log('–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä');
            
            const name = document.getElementById('productName').value.trim();
            const price = parseInt(document.getElementById('productPrice').value);
            const category = document.getElementById('productCategory').value;
            const sizes = document.getElementById('productSizes').value.split(',').map(s => s.trim());
            const emoji = document.getElementById('productEmoji').value.trim();
            
            if (!name) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞');
                return;
            }
            
            if (!price || price <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ü–µ–Ω—É');
                return;
            }
            
            const newProduct = {
                id: 'prod_' + Date.now(),
                name: name,
                price: price,
                category: category,
                emoji: emoji || 'üõçÔ∏è',
                sizes: sizes.length > 0 ? sizes : ['ONE SIZE'],
                description: '–ü—Ä–µ–º–∏—É–º –∫–∞—á–µ—Å—Ç–≤–æ'
            };
            
            console.log('–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä:', newProduct);
            
            products.push(newProduct);
            saveProducts();
            displayProducts();
            loadProductsList();
            
            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('productName').value = '';
            document.getElementById('productPrice').value = '8900';
            document.getElementById('productSizes').value = 'S,M,L';
            document.getElementById('productEmoji').value = 'üëú';
            
            alert('‚úÖ –¢–æ–≤–∞—Ä "' + name + '" –¥–æ–±–∞–≤–ª–µ–Ω!');
        }

        function loadProductsList() {
            console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∞');
            const list = document.getElementById('productsList');
            list.innerHTML = '';
            
            if (products.length === 0) {
                list.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">–¢–æ–≤–∞—Ä–æ–≤ –Ω–µ—Ç</div>';
                return;
            }
            
            products.forEach(product => {
                const item = document.createElement('div');
                item.className = 'product-item';
                item.innerHTML = `
                    <div>
                        <strong>${product.emoji} ${product.name}</strong>
                        <div style="font-size: 12px; color: #666;">${product.price} —Ä—É–±. ‚Ä¢ ${product.category}</div>
                    </div>
                    <button class="delete-btn" onclick="deleteProduct('${product.id}')">–£–¥–∞–ª–∏—Ç—å</button>
                `;
                list.appendChild(item);
            });
        }

        function deleteProduct(productId) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?')) {
                products = products.filter(p => p.id !== productId);
                saveProducts();
                displayProducts();
                loadProductsList();
                alert('üóëÔ∏è –¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω');
            }
        }

        function saveProducts() {
            localStorage.setItem('products', JSON.stringify(products));
            console.log('‚úÖ –¢–æ–≤–∞—Ä—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>